<!DOCTYPE html>
<!--
TruthLens Media Literacy Quiz & Learning Hub
Version: 2.0.0 - EDUCATIONAL LEARNING TABS
Date: December 27, 2024

WHAT'S NEW IN v2.0.0:
✅ ADDED: Educational learning tabs (Clickbait, Bias, Misinformation, etc.)
✅ ADDED: 8 comprehensive media literacy topics with examples
✅ ADDED: Tab navigation that doesn't interfere with main navigation
✅ ADDED: Both quiz-taking and learning capabilities in one page
✅ PRESERVED: All v1.0.0 quiz functionality (DO NO HARM ✓)

EDUCATIONAL TOPICS INCLUDED:
1. Clickbait & Sensationalism
2. Bias & Objectivity
3. Fact vs. Opinion
4. Source Credibility
5. Misinformation & Disinformation
6. Deepfakes & AI-Generated Content
7. Logical Fallacies
8. Statistics & Data Manipulation

Last Modified: December 27, 2024 - v2.0.0 Educational Enhancement
I did no harm and this file is not truncated.
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Literacy Quiz & Learning - TruthLens</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@600;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <!-- Unified Navigation CSS -->
    <link rel="stylesheet" href="/static/css/navigation.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding-top: 90px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page-header {
            text-align: center;
            color: white;
            margin-bottom: 2rem;
        }

        .page-header h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2.5rem;
            margin-bottom: 0.75rem;
        }

        .page-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* NEW v2.0.0: Content Tabs (separate from main navigation) */
        .content-tabs {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 0.5rem;
            margin-bottom: 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            backdrop-filter: blur(10px);
        }

        .content-tab {
            flex: 1;
            min-width: 120px;
            padding: 0.75rem 1rem;
            background: transparent;
            color: rgba(255, 255, 255, 0.7);
            border: 2px solid transparent;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .content-tab:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .content-tab.active {
            background: white;
            color: #667eea;
            border-color: white;
        }

        .content-tab i {
            margin-right: 0.5rem;
        }

        /* Tab Content Areas */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            margin-bottom: 2rem;
        }

        .card-header {
            border-bottom: 2px solid #f1f5f9;
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.75rem;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .card-title i {
            color: #667eea;
        }

        /* NEW v2.0.0: Learning Content Styles */
        .learning-section {
            margin-bottom: 2rem;
        }

        .learning-section h3 {
            font-size: 1.25rem;
            color: #1e293b;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .learning-section h3 i {
            color: #667eea;
        }

        .learning-section p {
            color: #475569;
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        .example-box {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-left: 4px solid #0ea5e9;
            padding: 1.25rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .example-box h4 {
            color: #0c4a6e;
            font-size: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .example-box h4 i {
            color: #0ea5e9;
        }

        .example-box p {
            color: #0c4a6e;
            font-size: 0.95rem;
            margin-bottom: 0.5rem;
        }

        .example-box .example-text {
            background: white;
            padding: 1rem;
            border-radius: 6px;
            font-style: italic;
            color: #1e293b;
            margin-top: 0.75rem;
        }

        .warning-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border-left: 4px solid #f59e0b;
            padding: 1.25rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .warning-box h4 {
            color: #92400e;
            font-size: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .warning-box h4 i {
            color: #d97706;
        }

        .warning-box ul {
            margin-left: 1.5rem;
            color: #78350f;
        }

        .warning-box li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        .tip-box {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border-left: 4px solid #10b981;
            padding: 1.25rem;
            border-radius: 8px;
            margin: 1.5rem 0;
        }

        .tip-box h4 {
            color: #065f46;
            font-size: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tip-box h4 i {
            color: #059669;
        }

        .tip-box ul {
            margin-left: 1.5rem;
            color: #064e3b;
        }

        .tip-box li {
            margin-bottom: 0.5rem;
            line-height: 1.6;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 3rem;
            color: #64748b;
        }

        .loading i {
            font-size: 3rem;
            color: #667eea;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Quiz Selection Grid */
        .quiz-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .quiz-card {
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.2);
            border-color: #667eea;
        }

        .quiz-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .quiz-category {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .quiz-difficulty {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .quiz-difficulty.beginner {
            background: #dcfce7;
            color: #166534;
        }

        .quiz-difficulty.intermediate {
            background: #fef3c7;
            color: #92400e;
        }

        .quiz-difficulty.expert {
            background: #fee2e2;
            color: #991b1b;
        }

        .quiz-card h3 {
            font-size: 1.25rem;
            color: #1e293b;
            margin-bottom: 0.75rem;
        }

        .quiz-card p {
            color: #64748b;
            font-size: 0.9rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .quiz-meta {
            display: flex;
            gap: 1.5rem;
            font-size: 0.85rem;
            color: #64748b;
        }

        .quiz-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quiz-meta-item i {
            color: #667eea;
        }

        .quiz-button {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            margin-top: 1rem;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        /* Quiz Taking Interface */
        #quiz-interface {
            display: none;
        }

        .quiz-progress {
            background: #f1f5f9;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 2rem;
        }

        .progress-bar-container {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 0.75rem;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
        }

        .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: #64748b;
        }

        .question-container {
            margin-bottom: 2rem;
        }

        .question-number {
            color: #667eea;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .question-text {
            font-size: 1.25rem;
            color: #1e293b;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .option {
            padding: 1.25rem;
            background: #f8fafc;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: #667eea;
            background: #ede9fe;
        }

        .option.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        }

        .option.correct {
            border-color: #10b981;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%);
        }

        .option.incorrect {
            border-color: #ef4444;
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%);
        }

        .explanation {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 1.25rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            display: none;
        }

        .explanation.show {
            display: block;
        }

        .explanation h4 {
            color: #0c4a6e;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .explanation h4 i {
            color: #0ea5e9;
        }

        .explanation p {
            color: #0c4a6e;
            line-height: 1.6;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #64748b;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Results Screen */
        #results-screen {
            display: none;
        }

        .score-display {
            text-align: center;
            padding: 3rem 2rem;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            border-radius: 12px;
            margin-bottom: 2rem;
        }

        .score-number {
            font-size: 4rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        .score-message {
            font-size: 1.5rem;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .score-details {
            color: #64748b;
            font-size: 1rem;
        }

        .achievement {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            margin-bottom: 2rem;
        }

        .achievement i {
            font-size: 3rem;
            color: #d97706;
            margin-bottom: 1rem;
        }

        .achievement h3 {
            color: #92400e;
            margin-bottom: 0.5rem;
        }

        .achievement p {
            color: #78350f;
        }

        @media (max-width: 768px) {
            body {
                padding-top: 80px;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .content-tabs {
                flex-direction: column;
            }

            .content-tab {
                min-width: 100%;
            }

            .quiz-grid {
                grid-template-columns: 1fr;
            }

            .score-number {
                font-size: 3rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <nav class="main-navigation">
        <div class="nav-container-unified">
            <a href="/" class="nav-logo">
                <i class="fas fa-shield-check"></i>
                <span>TruthLens</span>
            </a>
            
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Toggle menu">
                <i class="fas fa-bars"></i>
            </button>
            
            <ul class="nav-menu" id="navMenu">
                <li><a href="/" class="nav-link">Home</a></li>
                <li><a href="/analyze" class="nav-link">News</a></li>
                <li><a href="/transcript" class="nav-link">Transcripts</a></li>
                <li><a href="/quiz" class="nav-link active">Quiz</a></li>
                <li><a href="/claim-tracker" class="nav-link">Claims</a></li>
                <li><a href="/debate-arena" class="nav-link">Debates</a></li>
                <li><a href="https://ai-bias-research.onrender.com" class="nav-link" target="_blank">AI Research <i class="fas fa-external-link-alt" style="font-size: 0.7rem;"></i></a></li>
                <li><a href="https://ai-debate-arena-k8gs.onrender.com" class="nav-link" target="_blank">AI Debates <i class="fas fa-external-link-alt" style="font-size: 0.7rem;"></i></a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1><i class="fas fa-graduation-cap"></i> Media Literacy Hub</h1>
            <p>Learn about media literacy and test your knowledge</p>
        </div>

        <!-- NEW v2.0.0: Content Tabs -->
        <div class="content-tabs">
            <button class="content-tab active" onclick="switchContentTab('quiz')">
                <i class="fas fa-clipboard-list"></i> Take Quiz
            </button>
            <button class="content-tab" onclick="switchContentTab('clickbait')">
                <i class="fas fa-exclamation-circle"></i> Clickbait
            </button>
            <button class="content-tab" onclick="switchContentTab('bias')">
                <i class="fas fa-balance-scale"></i> Bias
            </button>
            <button class="content-tab" onclick="switchContentTab('fact-opinion')">
                <i class="fas fa-lightbulb"></i> Fact vs Opinion
            </button>
            <button class="content-tab" onclick="switchContentTab('credibility')">
                <i class="fas fa-shield-alt"></i> Credibility
            </button>
            <button class="content-tab" onclick="switchContentTab('misinfo')">
                <i class="fas fa-exclamation-triangle"></i> Misinformation
            </button>
            <button class="content-tab" onclick="switchContentTab('deepfakes')">
                <i class="fas fa-video"></i> Deepfakes
            </button>
            <button class="content-tab" onclick="switchContentTab('fallacies')">
                <i class="fas fa-brain"></i> Fallacies
            </button>
            <button class="content-tab" onclick="switchContentTab('statistics')">
                <i class="fas fa-chart-bar"></i> Statistics
            </button>
        </div>

        <!-- Quiz Tab Content -->
        <div id="quiz-content" class="tab-content active">
            <!-- Quiz Selection -->
            <div id="quiz-selection">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-clipboard-list"></i>
                            Available Quizzes
                        </h2>
                    </div>
                    
                    <div class="loading" id="loading-quizzes">
                        <i class="fas fa-spinner"></i>
                        <p>Loading quizzes...</p>
                    </div>

                    <div id="quiz-list" class="quiz-grid" style="display: none;">
                        <!-- Quizzes will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Quiz Taking Interface -->
            <div id="quiz-interface">
                <div class="card">
                    <div class="quiz-progress">
                        <div class="progress-bar-container">
                            <div class="progress-bar-fill" id="progress-bar"></div>
                        </div>
                        <div class="progress-text">
                            <span id="progress-label">Question 1 of 10</span>
                            <span id="score-label">Score: 0</span>
                        </div>
                    </div>

                    <div class="question-container" id="question-container">
                        <!-- Question will be loaded here -->
                    </div>

                    <div class="explanation" id="explanation">
                        <!-- Explanation will appear here after answering -->
                    </div>

                    <div class="nav-buttons">
                        <button class="btn btn-secondary" onclick="exitQuiz()">
                            <i class="fas fa-arrow-left"></i> Exit Quiz
                        </button>
                        <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" disabled>
                            Next Question <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="results-screen">
                <div class="card">
                    <div class="score-display">
                        <div class="score-number" id="final-score">0%</div>
                        <div class="score-message" id="score-message">Great job!</div>
                        <div class="score-details" id="score-details">You got 0 out of 0 correct</div>
                    </div>

                    <div id="achievement-container">
                        <!-- Achievement will appear here if earned -->
                    </div>

                    <!-- Question Review Section -->
                    <div id="question-review" style="margin-top: 2rem;">
                        <!-- Question-by-question review will appear here -->
                    </div>

                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="btn btn-primary" onclick="restartQuiz()" style="margin-right: 1rem;">
                            <i class="fas fa-redo"></i> Retake Quiz
                        </button>
                        <button class="btn btn-secondary" onclick="backToSelection()">
                            <i class="fas fa-list"></i> Browse Quizzes
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- NEW v2.0.0: Learning Content Tabs -->
        
        <!-- Clickbait & Sensationalism Tab -->
        <div id="clickbait-content" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-exclamation-circle"></i>
                        Clickbait & Sensationalism
                    </h2>
                </div>

                <div class="learning-section">
                    <h3><i class="fas fa-book-open"></i> What is Clickbait?</h3>
                    <p>
                        Clickbait is content designed to attract attention and encourage visitors to click on a link, often using sensationalized or misleading headlines. The primary goal is to generate ad revenue from page views rather than to inform readers. Clickbait headlines typically exaggerate claims, create artificial suspense, or make shocking statements that the article itself doesn't fully support.
                    </p>
                    <p>
                        While not all attention-grabbing headlines are clickbait, the key distinction is whether the headline accurately represents the content. Legitimate news uses compelling headlines that still maintain accuracy and context. Clickbait, however, deliberately misleads or withholds information to manipulate curiosity—a phenomenon known as the "curiosity gap."
                    </p>
                    <p>
                        Sensationalism takes this further by presenting ordinary news stories as more dramatic or significant than they actually are. This can involve exaggerated language, selective facts, misleading statistics, or focusing on shocking details while ignoring broader context. Both clickbait and sensationalism prioritize engagement over accuracy and can contribute to misinformation.
                    </p>
                </div>

                <div class="example-box">
                    <h4><i class="fas fa-flag"></i> Clickbait Example</h4>
                    <p><strong>Headline:</strong></p>
                    <div class="example-text">
                        "Doctors HATE This One Weird Trick! You Won't Believe What Happened Next!"
                    </div>
                    <p style="margin-top: 1rem;"><strong>Red Flags:</strong> Uses all caps, creates artificial mystery, appeals to emotion without providing information, promises shocking revelations.</p>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> Warning Signs</h4>
                    <ul>
                        <li>Headlines with ALL CAPS or excessive punctuation!!!</li>
                        <li>Phrases like "You won't believe," "This one trick," or "What happened next will shock you"</li>
                        <li>Numbers used to create lists ("Number 7 will blow your mind!")</li>
                        <li>Vague pronouns instead of specific information ("They don't want you to know...")</li>
                        <li>Headlines that don't answer basic questions (who, what, when, where, why)</li>
                    </ul>
                </div>

                <div class="tip-box">
                    <h4><i class="fas fa-lightbulb"></i> How to Protect Yourself</h4>
                    <ul>
                        <li>Read beyond the headline before sharing</li>
                        <li>Check if the article delivers on the headline's promise</li>
                        <li>Look for specific facts and verifiable claims, not just emotional appeals</li>
                        <li>Consider the source's reputation and revenue model</li>
                        <li>Ask yourself: "Does this headline inform me, or just make me curious?"</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Bias & Objectivity Tab -->
        <div id="bias-content" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-balance-scale"></i>
                        Bias & Objectivity
                    </h2>
                </div>

                <div class="learning-section">
                    <h3><i class="fas fa-book-open"></i> Understanding Media Bias</h3>
                    <p>
                        Media bias occurs when news coverage systematically favors particular viewpoints, political positions, or narratives while downplaying or dismissing others. While complete objectivity is impossible (all humans have perspectives), responsible journalism strives for fairness by presenting multiple viewpoints, separating facts from opinions, and being transparent about potential conflicts of interest. Bias can manifest through story selection (which stories to cover), framing (how stories are presented), word choice, source selection, and what information is emphasized or omitted.
                    </p>
                    <p>
                        There are several types of bias to watch for: political bias (favoring liberal or conservative perspectives), corporate bias (protecting business interests), sensationalism bias (prioritizing dramatic stories over important ones), and confirmation bias (seeking information that confirms existing beliefs). Bias isn't always intentional—it can stem from unconscious assumptions, newsroom culture, or economic pressures. Understanding bias helps you consume news more critically and seek out diverse, balanced perspectives.
                    </p>
                    <p>
                        It's important to distinguish between bias and perspective. A clearly labeled opinion column or editorial can present a strong viewpoint while still being valuable journalism. The problem arises when bias masquerades as objective reporting, when alternative viewpoints are completely excluded, or when facts are distorted to support a predetermined narrative. The solution isn't to avoid all sources with perspective, but to recognize bias when present and balance your news diet with multiple viewpoints.
                    </p>
                </div>

                <div class="example-box">
                    <h4><i class="fas fa-balance-scale"></i> Biased vs. Balanced Framing</h4>
                    <p><strong>Biased:</strong></p>
                    <div class="example-text">
                        "Radical protesters disrupt peaceful neighborhood"
                    </div>
                    <p style="margin-top: 0.5rem;"><strong>Balanced:</strong></p>
                    <div class="example-text">
                        "200 demonstrators march through downtown in housing affordability protest"
                    </div>
                    <p style="margin-top: 1rem;"><strong>Analysis:</strong> The first uses loaded language ("radical," "disrupt") that frames protesters negatively. The second provides factual information (number, location, cause) without editorial judgment.</p>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> Signs of Bias</h4>
                    <ul>
                        <li>Loaded language and emotionally charged words</li>
                        <li>Selective omission of relevant facts or context</li>
                        <li>Unbalanced source selection (only interviewing one side)</li>
                        <li>False equivalence (treating unequal positions as equally valid)</li>
                        <li>Headline doesn't match article content or cherry-picks one detail</li>
                    </ul>
                </div>

                <div class="tip-box">
                    <h4><i class="fas fa-lightbulb"></i> Strategies for Balanced News Consumption</h4>
                    <ul>
                        <li>Read the same story from multiple sources with different perspectives</li>
                        <li>Distinguish between news reporting and opinion/editorial content</li>
                        <li>Pay attention to what's NOT being said or which voices are excluded</li>
                        <li>Use media bias charts to understand a source's general lean</li>
                        <li>Follow journalists known for fairness across the political spectrum</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Fact vs. Opinion Tab -->
        <div id="fact-opinion-content" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-lightbulb"></i>
                        Fact vs. Opinion
                    </h2>
                </div>

                <div class="learning-section">
                    <h3><i class="fas fa-book-open"></i> The Critical Distinction</h3>
                    <p>
                        A fact is a statement that can be proven true or false through evidence, observation, or verification. Facts exist independently of beliefs or feelings—they're either accurate or inaccurate regardless of who states them. For example, "The meeting started at 3 PM" is a fact that can be verified. An opinion, however, is a judgment, belief, or viewpoint that cannot be definitively proven true or false. "3 PM is too late for a meeting" is an opinion—it reflects someone's preference or interpretation, and reasonable people can disagree.
                    </p>
                    <p>
                        The challenge in modern media is that facts and opinions are frequently blended together. A news article might state a verifiable fact ("Unemployment dropped to 4%") and then include interpretation ("showing the economy is strong"). The first part can be verified; the second is an opinion about what the fact means. Skilled journalists clearly separate these, but advocacy journalism, opinion pieces disguised as news, and social media commentary often mix them without distinction, making it harder for readers to know what's proven versus what's perspective.
                    </p>
                    <p>
                        Understanding this difference is crucial for media literacy. When you encounter a claim, ask: "Could this be verified with evidence?" Facts should point to sources, data, or documented events. Opinions use value judgments ("better," "worse," "should"), predictions about the future, or interpretations of ambiguous situations. Both facts and opinions have their place in discourse, but confusing the two—or presenting opinions as facts—undermines informed decision-making and rational debate.
                    </p>
                </div>

                <div class="example-box">
                    <h4><i class="fas fa-check-double"></i> Fact vs. Opinion Examples</h4>
                    <p><strong>Fact:</strong></p>
                    <div class="example-text">
                        "The city council voted 7-2 to approve the new budget"
                    </div>
                    <p style="margin-top: 0.5rem;"><strong>Opinion:</strong></p>
                    <div class="example-text">
                        "The city council made the right decision by approving the budget"
                    </div>
                    <p style="margin-top: 1rem;"><strong>Mixed (Fact + Opinion):</strong></p>
                    <div class="example-text">
                        "The city council's controversial 7-2 vote approved a budget that many consider inadequate"
                    </div>
                    <p style="margin-top: 0.5rem;"><em>The vote count is fact; "controversial" and "many consider inadequate" are opinions.</em></p>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> Common Opinion Indicators</h4>
                    <ul>
                        <li>Value judgments: "best," "worst," "beautiful," "terrible," "important"</li>
                        <li>Predictions: "will," "going to," "likely to"</li>
                        <li>Beliefs: "should," "ought to," "must," "need to"</li>
                        <li>Interpretations: "shows that," "proves," "demonstrates"</li>
                        <li>Vague qualifiers: "many believe," "experts say," "some think"</li>
                    </ul>
                </div>

                <div class="tip-box">
                    <h4><i class="fas fa-lightbulb"></i> Questions to Ask</h4>
                    <ul>
                        <li>Can this statement be verified with evidence or data?</li>
                        <li>Does this express someone's judgment, interpretation, or preference?</li>
                        <li>Are value words being used? (good, bad, important, trivial)</li>
                        <li>Is this about what IS or about what SHOULD BE?</li>
                        <li>Would everyone with the same evidence reach the same conclusion?</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Source Credibility Tab -->
        <div id="credibility-content" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-shield-alt"></i>
                        Source Credibility
                    </h2>
                </div>

                <div class="learning-section">
                    <h3><i class="fas fa-book-open"></i> Evaluating Information Sources</h3>
                    <p>
                        Source credibility refers to how trustworthy and reliable an information source is. Not all sources are created equal—a peer-reviewed scientific journal, a random blog post, and a social media comment all carry very different levels of credibility. Credible sources typically have editorial standards, fact-checking processes, transparent funding, qualified authors with relevant expertise, and accountability when errors occur. They cite their sources, distinguish between facts and analysis, and issue corrections when wrong.
                    </p>
                    <p>
                        When evaluating a source, consider several factors: Who created it? What are their credentials and potential biases? What's their track record for accuracy? How do they handle corrections? Is the source transparent about funding and ownership? Do they cite verifiable evidence? Are their claims corroborated by other credible sources? A government health agency, established news organization, or academic researcher will generally be more reliable than an anonymous website or partisan blog—though even credible sources can make mistakes or have blind spots.
                    </p>
                    <p>
                        The internet has democratized information creation, which brings both benefits and challenges. While more voices can now be heard, it's also easier to spread misinformation. Anyone can create a professional-looking website or viral social media post. This makes source evaluation more important than ever. Look for sources that value accuracy over engagement, that admit uncertainty when appropriate, that provide context and nuance, and that have established reputations to protect. When in doubt, verify claims through multiple independent, credible sources before accepting them as true.
                    </p>
                </div>

                <div class="example-box">
                    <h4><i class="fas fa-search"></i> Credibility Checklist</h4>
                    <p><strong>High Credibility Indicators:</strong></p>
                    <div class="example-text">
                        ✓ Named authors with relevant expertise<br>
                        ✓ Citations to verifiable sources<br>
                        ✓ Transparent funding/ownership<br>
                        ✓ Established reputation for accuracy<br>
                        ✓ Regular corrections policy<br>
                        ✓ Editorial oversight
                    </div>
                    <p style="margin-top: 1rem;"><strong>Low Credibility Indicators:</strong></p>
                    <div class="example-text">
                        ✗ Anonymous or unverifiable authors<br>
                        ✗ No sources cited<br>
                        ✗ Hidden ownership/agenda<br>
                        ✗ Track record of false claims<br>
                        ✗ Never admits errors<br>
                        ✗ No editorial standards
                    </div>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> Red Flags</h4>
                    <ul>
                        <li>Source has clear financial or political incentive to mislead</li>
                        <li>Claims seem too good/bad to be true or appeal to emotions over facts</li>
                        <li>No other credible sources are reporting the same information</li>
                        <li>Website URL mimics a legitimate source (e.g., "ABCNews.com.co")</li>
                        <li>Article is undated or has impossible dates</li>
                    </ul>
                </div>

                <div class="tip-box">
                    <h4><i class="fas fa-lightbulb"></i> Verification Steps</h4>
                    <ul>
                        <li>Check the "About Us" page—who runs this source?</li>
                        <li>Look up the author—do they have expertise in this topic?</li>
                        <li>Search for the claim on fact-checking sites (Snopes, FactCheck.org)</li>
                        <li>Verify with multiple independent credible sources</li>
                        <li>Check domain registration (use WHOIS lookup for websites)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Misinformation & Disinformation Tab -->
        <div id="misinfo-content" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-exclamation-triangle"></i>
                        Misinformation & Disinformation
                    </h2>
                </div>

                <div class="learning-section">
                    <h3><i class="fas fa-book-open"></i> Understanding False Information</h3>
                    <p>
                        Misinformation and disinformation both refer to false or inaccurate information, but they differ in intent. Misinformation is false information shared without malicious intent—someone genuinely believes it's true and passes it along. Your aunt who shares a debunked health remedy on Facebook probably isn't trying to harm anyone; she's spreading misinformation. Disinformation, however, is deliberately created and spread to deceive, manipulate, or cause harm. It's false information created with the intention to mislead, often for political, financial, or ideological gain.
                    </p>
                    <p>
                        Both forms are dangerous because they can spread rapidly on social media, where algorithms prioritize engagement over accuracy. People tend to share information that confirms their existing beliefs (confirmation bias) and are more likely to trust content from friends and family than from experts or institutions. This creates "echo chambers" where false narratives circulate and get reinforced. Misinformation can evolve into disinformation as it's weaponized by bad actors, and even well-intentioned sharing of false content contributes to its spread and perceived credibility.
                    </p>
                    <p>
                        Common tactics include manipulated images or videos, fabricated quotes, misleading statistics (using real numbers in deceptive ways), false attribution (claiming a real person said something they didn't), and cherry-picking facts while ignoring context. Some disinformation contains grains of truth mixed with lies, making it harder to debunk. The goal is often to create doubt, polarize communities, or distract from real issues. Combating both requires critical thinking, fact-checking before sharing, and understanding that something's emotional appeal doesn't make it true.
                    </p>
                </div>

                <div class="example-box">
                    <h4><i class="fas fa-lie"></i> Misinformation vs. Disinformation</h4>
                    <p><strong>Misinformation Example:</strong></p>
                    <div class="example-text">
                        A person shares an outdated article about a medication recall, not realizing the issue was resolved months ago. They genuinely believe they're helping inform others.
                    </div>
                    <p style="margin-top: 1rem;"><strong>Disinformation Example:</strong></p>
                    <div class="example-text">
                        A political operative creates a fake "news" website that publishes fabricated stories about an opponent, designed to damage their reputation before an election.
                    </div>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> Common Tactics</h4>
                    <ul>
                        <li>Manipulated or fabricated images/videos ("cheapfakes" and deepfakes)</li>
                        <li>Out-of-context quotes or statistics</li>
                        <li>False attribution (fake quotes from real people)</li>
                        <li>Emotional manipulation (rage, fear, or outrage to bypass critical thinking)</li>
                        <li>Satire presented as real news</li>
                    </ul>
                </div>

                <div class="tip-box">
                    <h4><i class="fas fa-lightbulb"></i> Before You Share</h4>
                    <ul>
                        <li>Verify the information with credible sources</li>
                        <li>Check the date—is this current or outdated news?</li>
                        <li>Look for corroboration from multiple independent sources</li>
                        <li>Be skeptical of content designed to make you angry or afraid</li>
                        <li>Remember: Sharing misinformation, even unintentionally, helps it spread</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Deepfakes & AI-Generated Content Tab -->
        <div id="deepfakes-content" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-video"></i>
                        Deepfakes & AI-Generated Content
                    </h2>
                </div>

                <div class="learning-section">
                    <h3><i class="fas fa-book-open"></i> The Rise of Synthetic Media</h3>
                    <p>
                        Deepfakes are synthetic media created using artificial intelligence to replace or manipulate someone's likeness, voice, or actions in video, audio, or images. The technology uses deep learning algorithms to analyze thousands of images or audio samples of a person, then generates realistic but fake content showing them saying or doing things they never did. While deepfake technology has legitimate uses (film production, education, accessibility), it's increasingly weaponized to create fake pornography, political propaganda, fraud, and other harmful content.
                    </p>
                    <p>
                        AI-generated content extends beyond deepfakes to include entirely synthetic text, images, and audio created by systems like GPT, DALL-E, and Midjourney. This content can be remarkably convincing and is becoming harder to distinguish from human-created work. While these tools democratize creative expression and have valuable applications, they also enable mass production of misleading content at unprecedented scale. A single person can now generate thousands of fake articles, images, or videos that once would have required teams of professionals.
                    </p>
                    <p>
                        The challenge is that our traditional verification methods rely on "seeing is believing"—but we can no longer trust our eyes and ears alone. As deepfake technology improves, detection becomes harder. Currently, signs include unnatural facial movements, inconsistent lighting, audio sync issues, or strange artifacts around edges. However, these tells are disappearing as the technology advances. The solution requires a combination of technical detection tools, digital signatures/watermarking, media literacy education, and healthy skepticism about sensational content appearing online.
                    </p>
                </div>

                <div class="example-box">
                    <h4><i class="fas fa-video"></i> Deepfake Use Cases</h4>
                    <p><strong>Harmful Uses:</strong></p>
                    <div class="example-text">
                        • Fake videos of politicians making inflammatory statements<br>
                        • Non-consensual deepfake pornography<br>
                        • Voice cloning for fraud and scams<br>
                        • Impersonation for misinformation campaigns
                    </div>
                    <p style="margin-top: 1rem;"><strong>Legitimate Uses:</strong></p>
                    <div class="example-text">
                        • Film production and special effects<br>
                        • Historical education (showing historical figures)<br>
                        • Accessibility (voice synthesis for those who've lost speech)<br>
                        • Art and creative expression
                    </div>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> Detection Red Flags</h4>
                    <ul>
                        <li>Unnatural blinking patterns or lack of blinking</li>
                        <li>Mismatched lighting or shadows on face vs. background</li>
                        <li>Blurring or distortion around face edges or hairline</li>
                        <li>Audio that doesn't perfectly sync with mouth movements</li>
                        <li>Unusual skin texture or inconsistent skin tone</li>
                    </ul>
                </div>

                <div class="tip-box">
                    <h4><i class="fas fa-lightbulb"></i> Protection Strategies</h4>
                    <ul>
                        <li>Be skeptical of shocking videos, especially if unverified</li>
                        <li>Check if credible news sources are reporting the same content</li>
                        <li>Use reverse image search to find original sources</li>
                        <li>Look for official verification from the person allegedly in the content</li>
                        <li>Consider context: Is this consistent with the person's known views/behavior?</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Logical Fallacies Tab -->
        <div id="fallacies-content" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-brain"></i>
                        Logical Fallacies
                    </h2>
                </div>

                <div class="learning-section">
                    <h3><i class="fas fa-book-open"></i> Flawed Reasoning in Arguments</h3>
                    <p>
                        Logical fallacies are errors in reasoning that undermine the logic of an argument. They appear to be valid arguments on the surface but contain fundamental flaws that make their conclusions unreliable. Fallacies can be used intentionally to manipulate or deceive, or they can appear unintentionally when someone doesn't realize their reasoning is flawed. Understanding common fallacies helps you evaluate arguments more critically, whether in news media, political discourse, advertising, or everyday conversations.
                    </p>
                    <p>
                        Some of the most common fallacies include: Ad Hominem (attacking the person instead of their argument), Strawman (misrepresenting someone's position to make it easier to attack), False Dilemma (presenting only two options when more exist), Slippery Slope (claiming one thing will inevitably lead to extreme consequences), Appeal to Authority (claiming something is true just because an authority said so), and Hasty Generalization (drawing broad conclusions from limited examples). Each fallacy has a specific flaw in its logical structure that makes the conclusion unreliable.
                    </p>
                    <p>
                        Recognizing fallacies doesn't automatically mean the conclusion is wrong—a fallacious argument can still reach a correct conclusion, just not through valid reasoning. The important thing is identifying when an argument's logic is sound versus when it's trying to persuade through manipulation or flawed thinking. In media literacy, this skill helps you separate strong, evidence-based arguments from rhetoric, emotional appeals, and logical errors. When you spot a fallacy, ask yourself: "What would a valid argument for this position look like?" Sometimes there is one; sometimes there isn't.
                    </p>
                </div>

                <div class="example-box">
                    <h4><i class="fas fa-exclamation"></i> Common Fallacy Examples</h4>
                    <p><strong>Ad Hominem:</strong></p>
                    <div class="example-text">
                        "We shouldn't listen to her climate change proposals—she doesn't even recycle!"
                    </div>
                    <p style="margin-top: 0.5rem;"><em>Attacks the person's character instead of addressing their argument.</em></p>
                    
                    <p style="margin-top: 1rem;"><strong>False Dilemma:</strong></p>
                    <div class="example-text">
                        "Either we ban all social media, or we accept that children will be harmed online."
                    </div>
                    <p style="margin-top: 0.5rem;"><em>Ignores other options like regulation, education, or parental controls.</em></p>
                    
                    <p style="margin-top: 1rem;"><strong>Slippery Slope:</strong></p>
                    <div class="example-text">
                        "If we allow any gun regulations, soon they'll ban all guns and eliminate the Second Amendment!"
                    </div>
                    <p style="margin-top: 0.5rem;"><em>Claims one action will inevitably lead to extreme consequences without evidence.</em></p>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> More Fallacies to Watch For</h4>
                    <ul>
                        <li><strong>Appeal to Emotion:</strong> Using fear, pity, or anger instead of logic</li>
                        <li><strong>Bandwagon:</strong> "Everyone believes it, so it must be true"</li>
                        <li><strong>Red Herring:</strong> Introducing irrelevant information to distract</li>
                        <li><strong>Circular Reasoning:</strong> Using the conclusion as evidence ("It's true because it's true")</li>
                        <li><strong>False Cause:</strong> Assuming correlation means causation</li>
                    </ul>
                </div>

                <div class="tip-box">
                    <h4><i class="fas fa-lightbulb"></i> Evaluating Arguments</h4>
                    <ul>
                        <li>Identify the claim and the evidence supporting it</li>
                        <li>Check if the evidence logically supports the conclusion</li>
                        <li>Look for emotional manipulation or distraction tactics</li>
                        <li>Ask: "Could this conclusion be wrong even if the premises are true?"</li>
                        <li>Seek out steel man arguments (strongest version of opposing views)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Statistics & Data Manipulation Tab -->
        <div id="statistics-content" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">
                        <i class="fas fa-chart-bar"></i>
                        Statistics & Data Manipulation
                    </h2>
                </div>

                <div class="learning-section">
                    <h3><i class="fas fa-book-open"></i> How Numbers Can Mislead</h3>
                    <p>
                        Statistics and data are powerful tools for understanding the world, but they can also be manipulated to mislead. The phrase "lies, damned lies, and statistics" reflects how true numbers can be presented in ways that create false impressions. Common tactics include cherry-picking data (selecting only data that supports your point while ignoring contradictory data), using misleading graphs (manipulating scales, axes, or visual representation), citing percentages without absolute numbers, comparing incomparable things, and presenting correlation as causation.
                    </p>
                    <p>
                        For example, a headline might claim "Crime increased 50%!"—which sounds dramatic until you learn it went from 2 incidents to 3 incidents in a small town. Or a graph might show dramatic changes by manipulating the y-axis scale, making a minor fluctuation look like a major trend. Sometimes accurate statistics are misleading simply through context: "90% of dentists recommend this toothpaste" doesn't mention that they could recommend multiple brands. Understanding how data can be manipulated helps you ask better questions and demand better evidence.
                    </p>
                    <p>
                        To evaluate statistical claims, always ask: What's the sample size? Who was surveyed? What's the margin of error? Is this correlation or causation? What data is NOT being shown? Who funded this research? What are the absolute numbers behind percentages? Is the comparison fair and meaningful? Good data journalism provides this context; misleading uses of statistics hide it. Remember that even accurate statistics can tell only part of the story—context, methodology, and honest interpretation matter just as much as the numbers themselves.
                    </p>
                </div>

                <div class="example-box">
                    <h4><i class="fas fa-chart-line"></i> Misleading Statistics Example</h4>
                    <p><strong>Misleading Claim:</strong></p>
                    <div class="example-text">
                        "Support for the policy DOUBLED from last year!"
                    </div>
                    <p style="margin-top: 1rem;"><strong>Reality Check:</strong></p>
                    <div class="example-text">
                        Support went from 3% to 6% of respondents in a poll of 100 people. While technically doubled, it's still only 6 people, and this difference is likely within the margin of error.
                    </div>
                    <p style="margin-top: 1rem;"><strong>Why It's Misleading:</strong> Uses percentage change instead of absolute numbers to exaggerate a trivial difference. Doesn't provide context about sample size or statistical significance.</p>
                </div>

                <div class="warning-box">
                    <h4><i class="fas fa-exclamation-triangle"></i> Data Manipulation Tactics</h4>
                    <ul>
                        <li>Manipulated graph scales (y-axis doesn't start at zero)</li>
                        <li>Cherry-picking time periods to show favorable trends</li>
                        <li>Using percentages without showing absolute numbers</li>
                        <li>Comparing incomparable groups or time periods</li>
                        <li>Conflating correlation with causation</li>
                    </ul>
                </div>

                <div class="tip-box">
                    <h4><i class="fas fa-lightbulb"></i> Questions to Ask About Statistics</h4>
                    <ul>
                        <li>What's the sample size and margin of error?</li>
                        <li>Who conducted the research and who funded it?</li>
                        <li>Are percentages backed by meaningful absolute numbers?</li>
                        <li>Is the graph scale appropriate and not manipulated?</li>
                        <li>Does correlation necessarily mean causation here?</li>
                    </ul>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const navMenu = document.getElementById('navMenu');
            navMenu.classList.toggle('active');
        }

        // NEW v2.0.0: Content Tab Switching
        function switchContentTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));

            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.content-tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            // Show selected tab content
            const selectedContent = document.getElementById(tabName + '-content');
            if (selectedContent) {
                selectedContent.classList.add('active');
            }

            // Add active class to clicked tab
            event.target.closest('.content-tab').classList.add('active');

            // Scroll to top of content
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Quiz State
        let quizzes = [];
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let score = 0;
        let answers = [];
        let attemptId = null; // Track the attempt ID from backend
        let quizStartTime = null; // Track start time for time_taken

        // Load quizzes on page load
        document.addEventListener('DOMContentLoaded', loadQuizzes);

        async function loadQuizzes() {
            try {
                const response = await fetch('/api/quiz/list');
                const data = await response.json();
                
                if (data.success && data.quizzes) {
                    quizzes = data.quizzes;
                    displayQuizzes();
                }
            } catch (error) {
                console.error('Error loading quizzes:', error);
                document.getElementById('loading-quizzes').innerHTML = `
                    <i class="fas fa-exclamation-circle" style="color: #ef4444;"></i>
                    <p style="color: #ef4444;">Failed to load quizzes. Please refresh the page.</p>
                `;
            }
        }

        function displayQuizzes() {
            const container = document.getElementById('quiz-list');
            const loading = document.getElementById('loading-quizzes');
            
            if (quizzes.length === 0) {
                loading.innerHTML = `
                    <i class="fas fa-inbox"></i>
                    <p>No quizzes available yet. Check back soon!</p>
                `;
                return;
            }

            loading.style.display = 'none';
            container.style.display = 'grid';

            container.innerHTML = quizzes.map(quiz => `
                <div class="quiz-card" onclick="startQuiz(${quiz.id})">
                    <div class="quiz-card-header">
                        <span class="quiz-category">${quiz.category}</span>
                        <span class="quiz-difficulty ${quiz.difficulty}">${quiz.difficulty}</span>
                    </div>
                    <h3>${quiz.title}</h3>
                    <p>${quiz.description}</p>
                    <div class="quiz-meta">
                        <div class="quiz-meta-item">
                            <i class="fas fa-question-circle"></i>
                            <span>${quiz.question_count} questions</span>
                        </div>
                        <div class="quiz-meta-item">
                            <i class="fas fa-clock"></i>
                            <span>~${quiz.estimated_time} min</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        async function startQuiz(quizId) {
            try {
                const response = await fetch(`/api/quiz/${quizId}/start`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' }
                });

                const data = await response.json();
                
                if (data.success && data.quiz) {
                    currentQuiz = data.quiz;
                    attemptId = data.attempt_id; // Store attempt ID
                    quizStartTime = Date.now(); // Record start time
                    currentQuestionIndex = 0;
                    score = 0;
                    answers = [];
                    
                    document.getElementById('quiz-selection').style.display = 'none';
                    document.getElementById('quiz-interface').style.display = 'block';
                    
                    showQuestion();
                } else {
                    alert(data.error || 'Failed to start quiz. Please try again.');
                }
            } catch (error) {
                console.error('Error starting quiz:', error);
                alert('Failed to start quiz. Please try again.');
            }
        }

        function showQuestion() {
            const question = currentQuiz.questions[currentQuestionIndex];
            const container = document.getElementById('question-container');
            
            // Update progress
            const progress = ((currentQuestionIndex + 1) / currentQuiz.questions.length) * 100;
            document.getElementById('progress-bar').style.width = progress + '%';
            document.getElementById('progress-label').textContent = 
                `Question ${currentQuestionIndex + 1} of ${currentQuiz.questions.length}`;
            document.getElementById('score-label').textContent = `Score: ${score}`;

            // Display question
            container.innerHTML = `
                <div class="question-number">Question ${currentQuestionIndex + 1}</div>
                <div class="question-text">${question.question_text}</div>
                <div class="options-list">
                    ${question.options.map((option, index) => `
                        <div class="option" onclick="selectOption(${index})">
                            ${option}
                        </div>
                    `).join('')}
                </div>
            `;

            // Hide explanation and disable next button
            document.getElementById('explanation').classList.remove('show');
            document.getElementById('next-btn').disabled = true;
        }

        function selectOption(optionIndex) {
            const question = currentQuiz.questions[currentQuestionIndex];
            const options = document.querySelectorAll('.option');
            
            // Remove previous selections
            options.forEach(opt => {
                opt.classList.remove('selected');
                opt.style.pointerEvents = 'auto';
            });

            // Mark selected option
            options[optionIndex].classList.add('selected');

            // Disable further selections for this question
            options.forEach(opt => opt.style.pointerEvents = 'none');

            // Enable next button
            document.getElementById('next-btn').disabled = false;

            // Record answer with option_id for backend validation
            answers.push({
                question_id: question.id,
                selected_option_id: question.options[optionIndex].id
            });
        }

        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < currentQuiz.questions.length) {
                showQuestion();
            } else {
                showResults();
            }
        }

        async function showResults() {
            const timeTaken = Math.floor((Date.now() - quizStartTime) / 1000); // seconds
            
            // Convert answers array to backend format: { question_id: option_id }
            const answersDict = {};
            answers.forEach(answer => {
                answersDict[answer.question_id] = answer.selected_option_id;
            });
            
            // Submit results to backend and get detailed feedback
            let backendResults = null;
            try {
                const response = await fetch(`/api/quiz/${currentQuiz.id}/submit`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        attempt_id: attemptId,
                        answers: answersDict,
                        time_taken: timeTaken
                    })
                });
                const data = await response.json();
                if (data.success && data.results) {
                    backendResults = data.results;
                    score = data.results.correct_answers;
                }
            } catch (error) {
                console.error('Error submitting results:', error);
            }

            const percentage = backendResults ? backendResults.score : Math.round((score / currentQuiz.questions.length) * 100);

            // Display results
            document.getElementById('quiz-interface').style.display = 'none';
            document.getElementById('results-screen').style.display = 'block';

            document.getElementById('final-score').textContent = percentage + '%';
            document.getElementById('score-details').textContent = 
                `You got ${score} out of ${currentQuiz.questions.length} correct`;

            // Determine message based on score
            let message = '';
            if (percentage >= 90) message = 'Outstanding! 🌟';
            else if (percentage >= 75) message = 'Great job! 👏';
            else if (percentage >= 60) message = 'Good effort! 👍';
            else message = 'Keep learning! 📚';
            
            document.getElementById('score-message').textContent = message;

            // Show achievement if perfect score
            const achievementContainer = document.getElementById('achievement-container');
            if (percentage === 100) {
                achievementContainer.innerHTML = `
                    <div class="achievement">
                        <i class="fas fa-trophy"></i>
                        <h3>Perfect Score!</h3>
                        <p>You answered every question correctly. Excellent work!</p>
                    </div>
                `;
            } else {
                achievementContainer.innerHTML = '';
            }

            // NEW: Show question-by-question review with "You got it right!" / "Oops!" feedback
            if (backendResults && backendResults.by_question) {
                const reviewSection = document.getElementById('question-review');
                let reviewHTML = '<h3 style="font-family: Space Grotesk, sans-serif; font-size: 1.5rem; color: #1e293b; margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;"><i class="fas fa-clipboard-check" style="color: #667eea;"></i> Question Review</h3>';
                
                backendResults.by_question.forEach((result, index) => {
                    const isCorrect = result.is_correct;
                    
                    reviewHTML += `
                        <div style="background: ${isCorrect ? 'linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%)' : 'linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%)'}; border-left: 4px solid ${isCorrect ? '#10b981' : '#ef4444'}; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <div style="display: flex; align-items: start; gap: 1rem; margin-bottom: 1rem;">
                                <div style="flex-shrink: 0; width: 48px; height: 48px; border-radius: 50%; background: ${isCorrect ? '#10b981' : '#ef4444'}; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-${isCorrect ? 'check' : 'times'}" style="color: white; font-size: 1.5rem;"></i>
                                </div>
                                <div style="flex: 1;">
                                    <h4 style="color: ${isCorrect ? '#065f46' : '#991b1b'}; font-size: 1.25rem; margin-bottom: 0.5rem; font-weight: 700;">
                                        ${isCorrect ? '✓ You got it right!' : '✗ Oops! That\'s incorrect'}
                                    </h4>
                                    <p style="color: #475569; font-size: 0.9rem; margin-bottom: 0.75rem;">Question ${index + 1} of ${backendResults.by_question.length}</p>
                                    <p style="color: #1e293b; font-size: 1.05rem; font-weight: 600; margin-bottom: 1rem; line-height: 1.6;">${result.question_text}</p>
                                    ${!isCorrect ? `<p style="background: white; padding: 0.75rem; border-radius: 6px; color: #64748b; font-size: 0.95rem; margin-bottom: 1rem;"><i class="fas fa-info-circle" style="color: #3b82f6;"></i> <strong>The correct answer was highlighted during grading.</strong></p>` : ''}
                                    <div style="background: white; padding: 1.25rem; border-radius: 8px; border-left: 3px solid #0ea5e9;">
                                        <p style="color: #0c4a6e; margin: 0; line-height: 1.7;"><strong style="color: #075985;"><i class="fas fa-lightbulb" style="color: #f59e0b;"></i> Explanation:</strong> ${result.explanation || 'No explanation provided.'}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                reviewSection.innerHTML = reviewHTML;
            }
        }

        function restartQuiz() {
            // Restart with new attempt
            startQuiz(currentQuiz.id);
        }

        function backToSelection() {
            document.getElementById('results-screen').style.display = 'none';
            document.getElementById('quiz-selection').style.display = 'block';
            
            currentQuiz = null;
            currentQuestionIndex = 0;
            score = 0;
            answers = [];
            attemptId = null;
            quizStartTime = null;
        }

        function exitQuiz() {
            if (confirm('Are you sure you want to exit this quiz? Your progress will be lost.')) {
                backToSelection();
                document.getElementById('quiz-interface').style.display = 'none';
            }
        }
    </script>
</body>
</html>

<!--
I did no harm and this file is not truncated.
v2.0.0 - December 27, 2024 - EDUCATIONAL LEARNING TABS

DEPLOYMENT READY FOR GITHUB/RENDER
Complete file ready for production deployment.
This file contains all code and is NOT truncated.
-->
